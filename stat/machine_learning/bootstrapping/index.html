<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/r_temp.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Bootstrapping: Animated Statistics Using R -- Yihui XIE</title>
<script language="JavaScript" type="text/javascript" src="../../../fun.js"></script>
<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link href="../../../css.css" rel="stylesheet" type="text/css" />
<link href="../../../r.css" rel="stylesheet" type="text/css" />
<link href="../../../favicon.ico" rel="shortcut icon" />
<script language="JavaScript" type="text/javascript" src="../../../fun.js"></script>
<meta name="Keywords" content="animations, statistics, R, Yihui Xie, R Graphics, grid graphics, Theory of Probability, Mathematical Statistics, Linear Models, Nonparametric Statistics, Time Series, Multivariate Statistics, Numerical Optimization, Data Mining, Machine Learning" />
<meta name="Description" content="Animated Statistics Using R: a web site for animations in the illustration of statistical theories, methods and applications. (by Yihui XIE)" />
<meta name="Author" content="Yihui XIE" />
</head>

<body>
<!-- InstanceBeginRepeat name="header" --><!-- InstanceBeginRepeatEntry -->
<div id="header">
<div id="logo"><img src="../../../images/banner.png" width="600" height="100" align="left" />
<pre class="hl" style="margin: 0px; border: none; padding: 0px; background-color: #FFF8DC"><span class="hl kwa">for</span> <span class="hl sym">(</span>i <span class="hl kwa">in</span> <span class="hl num">1</span><span class="hl sym">:</span><span class="hl num">360</span><span class="hl sym">) {</span>
    <span class="hl kwc">plot</span><span class="hl sym">(</span><span class="hl num">1</span><span class="hl sym">,</span> ann <span class="hl sym">=</span> <span class="hl kwb">F</span><span class="hl sym">,</span> type <span class="hl sym">=</span> <span class="hl str">&quot;n&quot;</span><span class="hl sym">,</span> axes <span class="hl sym">=</span> <span class="hl kwb">F</span><span class="hl sym">)</span>
    <span class="hl kwc">text</span><span class="hl sym">(</span><span class="hl num">1</span><span class="hl sym">,</span> <span class="hl num">1</span><span class="hl sym">,</span> <span class="hl str">&quot;Animation&quot;</span><span class="hl sym">,</span> srt <span class="hl sym">=</span> i<span class="hl sym">,</span> <span class="hl kwc">col</span> <span class="hl sym">=</span>
        <span class="hl kwc">rainbow</span><span class="hl sym">(</span><span class="hl num">360</span><span class="hl sym">)[</span>i<span class="hl sym">],</span> cex <span class="hl sym">=</span> <span class="hl num">7</span> <span class="hl sym">*</span> i<span class="hl sym">/</span><span class="hl num">360</span><span class="hl sym">)</span>
    <span class="hl kwc">Sys.sleep</span><span class="hl sym">(</span><span class="hl num">0.01</span><span class="hl sym">)}</span>
</pre></div>
</div>
<div id="title">Animated Statistics Using R <font color="#FF0000">(to be moved to <a href="http://animation.yihui.name" title="http://animation.yihui.name" target="_blank">AniWiki</a>!)</font> </div>
<!-- InstanceEndRepeatEntry --><!-- InstanceEndRepeat -->
<div id="mainwrap">
<div id="wrapper">
<!-- InstanceBeginRepeat name="navigation" --><!-- InstanceBeginRepeatEntry -->
  <div id="nav" >
    <ul>
      <li><a href="../../../">Home</a></li>
      <li><a href="../../../news/">What's New</a> </li>
      <li><a href="../../../intro/">Introduction to R</a>
        <ul>
          <li><a href="../../../intro/install/">Installation</a></li>
            <li><a href="../../../intro/documentations/">Documentations</a></li>
          </ul>
      </li>
      <li><a href="../../../gr/">R Graphics
        </a>
        <ul>
          <li><a href="../../../gr/elements/">Elements</a></li>
          <li><a href="../../../gr/graphics/">Package <font face="Bitstream Vera Sans Mono, Courier New, monospace">graphics</font></a></li>
          <li><a href="../../../gr/animation/" title="Introduction to the package 'animation'">Package <font face="Bitstream Vera Sans Mono, Courier New, monospace">animation</font></a> </li>
          </ul>
      </li>
      <li><a href="../../">Animated Statistics
        </a>
        <ul>
          <li><a href="../../probability/">Theory of Probability</a></li>
          <li><a href="../../sampling_survey/">Sampling Survey</a> </li>
          <li>Mathematical Stat.</li>
          <li>Linear Models</li>
          <li>Nonparametric Stat.</li>
          <li>Time Series Analysis </li>
          <li><a href="../../multivariate_stat/">Multivariate Stat.</a></li>
          <li><a href="../../computational_stat/">Computational Stat.</a> </li>
          <li>Data Mining</li>
          <li><a href="../">Machine Learning</a> </li>
        </ul>
      </li>
      <li><a href="../../../misc/">Miscellanea
        </a>
        <ul>
          <li><a href="../../../misc/gif_pdf_grDev.htm" title="Different file formats that can be probably used in animations">Animation Tricks</a></li>
          <li><a href="../../../misc/java.htm" title="How to make better animations using JavaScript">JavaScript Details</a> </li>
          <li><a href="../../../misc/highlight.htm" title="Highlight R code using software &quot;Highlight&quot; by Andre Simon">Highlight R Code</a></li>
          <li><a href="../../../misc/ideas.htm">Ideas</a> </li>
          <li><a href="../../../misc/credits.htm">Credits</a></li>
          <li><a href="../../../news/feed.xml">RSS Feed</a> </li>
        </ul>
      </li>
      </ul>
  </div>
<!-- InstanceEndRepeatEntry --><!-- InstanceEndRepeat -->

<!-- InstanceBeginEditable name="body" -->
<div id="main">
<div id="maintitle">Resampling... Empirical distribution... Computer-intensive... Free of complicated mathematical derivations... </div>
<fieldset>
<legend>Ideas of Bootstrapping </legend>
<p>Before I start, I'd like to recommend the book <em>An Introduction to the Bootstrap</em> by Efron and Tibshirani for those who want to know further about bootstrapping, because what I will introduce here is rather superficial.</p>
<p>The two critical points for bootstrapping are: (1) <em>data generating mechanism</em>; (2) <em>plug-in principle</em>. The first tells us how to re-generate data from a sample, while the latter point tells us how to make estimations. The idea of bootstrapping is based on the method of <em>resampling</em> to a large degree. In the real world, we only have one sample, say, <em>n</em> sample points <em>x<sub>1</sub>, x<sub>2</sub>, ..., x<sub>n</sub></em>, then the problems we must face (when making inferences) are: </p>
<ul>
  <li>
      How to guarantee the population distribution which we have assumed is correct?  </li>
  <li>How to derive the expression of the point estimate or confidence interval of a parameter if the population distribution is tooooooo complicated? </li>
  <li>Or how can we obtain the distribution of a statistic when the population distribution is complicated? </li>
</ul>
<p>We have always been deriving mathematical formulae... for this statistic... for that statistic... under perfect but unwarranted assumptions...</p>
<p>Why not re-generate some samples (resample the original sample <em>with</em> replacement) and re-compute the values of our statistic of interest? Then we can get <em>a series of</em> estimations of a certain parameter and in a result, we are able to make inferences based on these numbers using the <em>plug-in</em> principle, e.g. we may compute the standard error of a parameter by compute the corresponding standard error of that series of numbers (please do note the factual computation is not <em>exactly</em> so; read the references to learn the details), and estimate the quantiles of a statistic just by computing the corresponding quantiles of that series of numbers, etc. If you are confused by my description here, just keep on to the next section: an example might help you. </p>
</fieldset>
<fieldset>
<legend>Implementation by Computers </legend>
<p>Simple applications of bootstrapping with the help of computers can be extremely easy in R. Actually all we have to do is specify an argument <span class="mono">replace = TRUE </span> of the function <a href="http://finzi.psych.upenn.edu/R/library/base/html/sample.html" target="_blank"><em>sample()</em></a>. I think everybody with a little knowledge of statistics know the <acronym title="Simple Random Sampling Without Replacement">SRSWOR</acronym>. Here is a simple example: </p>
<pre class="hl"><span class="hl sym">&gt; (</span>x <span class="hl sym">=</span> <span class="hl num">1</span><span class="hl sym">:</span><span class="hl num">10</span><span class="hl sym">)</span>
 <span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]</span>  <span class="hl num">1  2  3  4  5  6  7  8  9 10</span>
<span class="hl sym">&gt;</span> <span class="hl kwc">sample</span><span class="hl sym">(</span>x<span class="hl sym">,</span> <span class="hl num">5</span><span class="hl sym">,</span> <span class="hl kwc">replace</span> <span class="hl sym">=</span> <span class="hl kwb">FALSE</span><span class="hl sym">)</span> <span class="hl slc"># no duplicated sample points</span>
 <span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]</span> <span class="hl num">7 3 4 1 5</span>
<span class="hl sym">&gt;</span> <span class="hl kwc">sample</span><span class="hl sym">(</span>x<span class="hl sym">,</span> <span class="hl num">5</span><span class="hl sym">,</span> <span class="hl kwc">replace</span> <span class="hl sym">=</span> <span class="hl kwb">TRUE</span><span class="hl sym">)</span> <span class="hl slc"># note there are two 8s</span>
 <span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]</span> <span class="hl num">2 9 4 8 8</span>
</pre>
<p>If we repeat the resampling procedure for many times, we may, at the same time, compute the value of the statistic of interest for many times with different samples. Using &quot;plug-in&quot; principle, we can approximately obtain the distribution of that statistic. For example, now we have a sample which consists of four numbers {1, 3, 4, 10}, and we want to examine the distribution of the sample mean:</p>
<pre class="hl"><span class="hl sym">&gt;</span> x <span class="hl sym">=</span> <span class="hl kwc">c</span><span class="hl sym">(</span><span class="hl num">1</span><span class="hl sym">,</span> <span class="hl num">3</span><span class="hl sym">,</span> <span class="hl num">4</span><span class="hl sym">,</span> <span class="hl num">10</span><span class="hl sym">)</span>
<span class="hl sym">&gt; (</span>x.mean <span class="hl sym">=</span> <span class="hl kwc">replicate</span><span class="hl sym">(</span><span class="hl num">100</span><span class="hl sym">,</span> <span class="hl kwc">mean</span><span class="hl sym">(</span><span class="hl kwc">sample</span><span class="hl sym">(</span>x<span class="hl sym">,</span> <span class="hl kwc">replace</span> <span class="hl sym">=</span> <span class="hl kwb">T</span><span class="hl sym">))))</span>
  <span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]</span>  <span class="hl num">6.25  4.50  5.25  2.50  5.00  2.25  1.75 10.00  2.50  2.75</span>
 <span class="hl sym">[</span><span class="hl num">11</span><span class="hl sym">]</span>  <span class="hl num">5.25  4.50  6.25  6.25  5.25  6.50  3.50  4.75  1.75  5.25</span>
 <span class="hl sym">[</span><span class="hl num">21</span><span class="hl sym">]</span>  <span class="hl num">3.25  4.75  3.25  2.25  2.75  3.75  5.50  6.50  3.25  4.00</span>
 <span class="hl sym">[</span><span class="hl num">31</span><span class="hl sym">]</span>  <span class="hl num">5.50  4.25  6.75  4.75  2.25  4.75  6.75  4.75  2.25  2.75</span>
 <span class="hl sym">[</span><span class="hl num">41</span><span class="hl sym">]</span>  <span class="hl num">2.75  3.75  5.25  3.00  6.75  1.75  3.50  3.75  6.75  1.50</span>
 <span class="hl sym">[</span><span class="hl num">51</span><span class="hl sym">]</span>  <span class="hl num">2.25  7.00  6.00  5.25  4.00  7.75  2.25  4.50  5.50  2.50</span>
 <span class="hl sym">[</span><span class="hl num">61</span><span class="hl sym">]</span>  <span class="hl num">2.50  3.75  4.50  4.00  6.50  4.50  3.75  6.75  4.25  5.50</span>
 <span class="hl sym">[</span><span class="hl num">71</span><span class="hl sym">]</span>  <span class="hl num">4.50  6.25  8.50  4.50  4.75  2.25  2.50  2.50  3.50  5.50</span>
 <span class="hl sym">[</span><span class="hl num">81</span><span class="hl sym">]</span>  <span class="hl num">6.75  4.25  6.00  4.25  4.75  3.00  1.75  5.00  3.50  4.75</span>
 <span class="hl sym">[</span><span class="hl num">91</span><span class="hl sym">]</span>  <span class="hl num">3.50  6.00  4.00  6.25  3.75  8.50  3.00  6.25  4.25  6.25</span>
</pre>
<p>I used the function <a href="http://finzi.psych.upenn.edu/R/library/base/html/lapply.html" target="_blank"><em>replicate()</em></a> to repeat the resampling: every time we got a &quot;new&quot; sample, we just computed a sample mean. After 100 replications, we got 100 mean values. And we can easily check the distribution of these numbers by histograms or other approaches. Below is a histogram with a density curve (use R functions <a href="http://finzi.psych.upenn.edu/R/library/graphics/html/hist.html" target="_blank"><em>hist()</em></a> and <a href="http://finzi.psych.upenn.edu/R/library/stats/html/density.html" target="_blank"><em>density()</em></a>): </p>
<div align="center"><img src="images/bootstrap.png" alt="The distribution of the sample mean by bootstrapping" width="548" height="434" title="The distribution of the sample mean by bootstrapping" /></div>
<p><strong>Figure 1</strong> <em>The distribution of the sample mean by bootstrapping.</em></p>
<p>Note that we can accordingly compute the estimations of the variance or quantiles of the sample mean using the above result. (e.g. <span class="mono"><a href="http://finzi.psych.upenn.edu/R/library/stats/html/sd.html" target="_blank">sd</a>(x.mean)</span>, <span class="mono"><a href="http://finzi.psych.upenn.edu/R/library/stats/html/quantile.html" target="_blank">quantile</a>(x.mean)</span>, etc.) </p>
</fieldset>
<fieldset>
<legend>Demonstration </legend>
<p>Let's generate some random numbers from U(0, 1) and check the distribution of the sample mean as the bootstrapping goes on. Blue points represent the original sample, and the red points mean these points are what we get by resampling (because they are resampled <em>with</em> replacement, the times of points being picked out are denoted by sunflower plots -- the number of &quot;leaves&quot; means times of being selected). Then we compute the sample mean based on these red points and plot its density accordingly.  </p>
<div align="center" id="divDemo">
<div id="loading">loading animation frames...</div>
<div id="divPreload">
<script language="JavaScript" type="text/javascript">
var nmax = 40
var ht = 500
for(i = 1; i <= nmax; i++){
	document.write("<div id=\"divPreload" + i + "\"><img src=\"images/" + i + ".png\" /></div>")
}
</script>
</div>
</div>
<div style="border: solid 1px #FF0000; margin-top: 20px; height: 20px;" title="Speed">
<div id="percent" style="width: 80%">80%</div>
</div>
<div id="divControl">
<input type="button" disabled="disabled" id="btnBegin" onclick="displayImage()" value="Begin"/>
<input type="button" disabled="disabled" id="btnFaster" onclick="fasterImage(-0.1)" value="Faster"/>
<input type="button" disabled="disabled" id="btnSlower" onclick="fasterImage(0.1)" value="Slower"/>
<input type="button" disabled="disabled" id="btnStop" onclick="stopImage()" value=" Stop "/> 
Time Interval: <label id="lbl">2</label> seconds; <label id="lblImage"></label>
</div>

</fieldset>
<fieldset>
<legend>Implementation in R </legend>
<p>There's a function <a href="http://finzi.psych.upenn.edu/R/library/animation/html/boot.iid.html" target="_blank"><em>boot.iid()</em></a> in the package <span class="mono">animation</span> for the demonstration of bootstrapping for i.i.d data. Please check the help file or the <a href="http://cran.r-project.org/doc/vignettes/animation/animation.pdf">vignette</a> of this package. </p>
</fieldset>
<fieldset>
<legend>References </legend>
<ul>
  <li>Bradley Efron; Robert Tibshirani (1994). <em>An Introduction to the Bootstrap</em>. Chapman &amp; Hall/CRC.</li></ul>
</fieldset>
</div>
<!-- InstanceEndEditable --></div></div>
<!-- InstanceBeginRepeat name="footer" --><!-- InstanceBeginRepeatEntry -->
<div id=footwrap>
<div id="footer">Copyright &copy;  2007 by <a href="http://www.yihui.name/cv/" target="_blank">Yihui XIE</a> from Beijing, China.
      Created on Oct 6, 2007; Last updated on 
<SCRIPT LANGUAGE="JAVASCRIPT">
<!--

var m_names = new Array("Jan", "Feb", "Mar", 
"Apr", "May", "Jun", "Jul", "Aug", "Sep", 
"Oct", "Nov", "Dec");

var d = new Date(document.lastModified);
var curr_date = d.getDate();
var curr_month = d.getMonth();
var curr_year = d.getFullYear();
document.write(m_names[curr_month] + " " + curr_date + ", " + curr_year);

//-->
</SCRIPT>
<br />
Recommended resolution: 1280*1024; Web browser: Firefox; <a href="http://www.yihui.name/en/guestbook.php" title="Leave a message to me in my guestbook" target="_blank">Feedbacks</a> are most welcome. </div>
</div>
<!-- InstanceEndRepeatEntry --><!-- InstanceEndRepeat -->
</body>
<!-- InstanceEnd --></html>
